(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["taskList"],{"1eec":function(e,a,t){"use strict";t("2fb3")},"2d77":function(e,a,t){},"2fb3":function(e,a,t){},"58a7":function(e,a,t){"use strict";t("5ea5")},"5ea5":function(e,a,t){},a434:function(e,a,t){"use strict";var n=t("23e7"),i=t("da84"),s=t("23cb"),c=t("5926"),l=t("07fa"),o=t("7b0b"),r=t("65f0"),d=t("8418"),u=t("1dde"),v=u("splice"),k=i.TypeError,f=Math.max,O=Math.min,b=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!v},{splice:function(e,a){var t,n,i,u,v,h,j=o(this),g=l(j),p=s(e,g),T=arguments.length;if(0===T?t=n=0:1===T?(t=0,n=g-p):(t=T-2,n=O(f(c(a),0),g-p)),g+t-n>b)throw k(m);for(i=r(j,n),u=0;u<n;u++)v=p+u,v in j&&d(i,u,j[v]);if(i.length=n,t<n){for(u=p;u<g-n;u++)v=u+n,h=u+t,v in j?j[h]=j[v]:delete j[h];for(u=g;u>g-n+t;u--)delete j[u-1]}else if(t>n)for(u=g-n;u>p;u--)v=u+n-1,h=u+t-1,v in j?j[h]=j[v]:delete j[h];for(u=0;u<t;u++)j[u+p]=arguments[u+2];return j.length=g-n+t,i}})},bb03:function(e,a,t){"use strict";t.r(a);var n=t("7a23"),i={class:"Lk"},s=Object(n["g"])("h1",null,"Задачи",-1),c={class:"Lk-Actions"},l=Object(n["g"])("span",{class:"icon icon-plus"},null,-1),o=Object(n["g"])("span",null,"Новая задача",-1),r=[l,o],d=Object(n["g"])("span",{class:"icon icon-inbox"},null,-1),u=Object(n["g"])("span",null,"Архивные задачи",-1),v=[d,u],k=Object(n["g"])("span",{class:"icon icon-inbox"},null,-1),f=Object(n["g"])("span",null,"Текущие задачи",-1),O=[k,f],b={class:"Lk-Tasks"},m={key:0},h={key:1},j=Object(n["g"])("span",{class:"icon icon-x"},null,-1),g=Object(n["h"])(" Очистить список архивных задач "),p=[j,g];function T(e,a,t,l,o,d){var u=Object(n["D"])("one-task"),k=Object(n["D"])("form-create-task"),f=Object(n["D"])("form-edit");return Object(n["v"])(),Object(n["f"])("div",i,[s,Object(n["g"])("div",c,[Object(n["g"])("div",{class:"Lk-NewTask",onClick:a[0]||(a[0]=function(){return l.newTask&&l.newTask.apply(l,arguments)})},r),"main"===l.taskFlag?(Object(n["v"])(),Object(n["f"])("div",{key:0,class:"Lk-NewTask",onClick:a[1]||(a[1]=function(){return l.getArchivedTask&&l.getArchivedTask.apply(l,arguments)})},v)):(Object(n["v"])(),Object(n["f"])("div",{key:1,class:"Lk-NewTask",onClick:a[2]||(a[2]=function(){return l.getMainTask&&l.getMainTask.apply(l,arguments)})},O))]),Object(n["g"])("div",b,[l.taskLists.length||"main"!==l.taskFlag?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("p",m," У вас еще нет активных задач. ")),l.taskLists.length||"archive"!==l.taskFlag?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("p",h," Архив задач пуст ")),(Object(n["v"])(!0),Object(n["f"])(n["a"],null,Object(n["B"])(l.taskLists,(function(e){return Object(n["v"])(),Object(n["d"])(u,{key:e._id,task:e,onEditTask:l.editOneTask,onArchivedTask:l.archivedOneTask,onFinishedTask:l.finishedOneTask},null,8,["task","onEditTask","onArchivedTask","onFinishedTask"])})),128))]),"archive"===l.taskFlag&&l.taskLists.length?(Object(n["v"])(),Object(n["f"])("span",{key:0,class:"Lk-NewTask",onClick:a[3]||(a[3]=function(){return l.clearArchive&&l.clearArchive.apply(l,arguments)})},p)):Object(n["e"])("",!0),Object(n["i"])(k,{ref:"createTaskForm",onNewTask:l.newTaskSave},null,8,["onNewTask"]),Object(n["i"])(f,{ref:"editTaskForm","data-in-form":l.editData,onSaveEditData:l.saveAfterEdit},null,8,["data-in-form","onSaveEditData"])])}t("a4d3"),t("e01a");var F={class:"OneTask-ActionsButtons"},y={key:0,class:"OneTask-Finished"},N={key:1,class:"OneTask-Finished"},S={key:2,class:"OneTask-Finished"},A={class:"OneTask-Name"},w=Object(n["g"])("span",{class:"OneTask-NameHead"},[Object(n["g"])("b",null,"Название"),Object(n["h"])(": ")],-1),D={class:"OneTask-NameValue"},G={class:"OneTask-Description"},E=Object(n["g"])("span",{class:"OneTask-NameHead"},[Object(n["g"])("b",null,"Описание"),Object(n["h"])(": ")],-1),C={class:"OneTask-NameValue"},L={class:"OneTask-DateCreate"},J=Object(n["g"])("span",{class:"OneTask-NameHead"},[Object(n["g"])("b",null,"Дата создания"),Object(n["h"])(": ")],-1),_={class:"OneTask-DateFinish"},x=Object(n["g"])("span",{class:"OneTask-NameHead"},[Object(n["g"])("b",null,"Дата окончания"),Object(n["h"])(": ")],-1);function V(e,a,t,i,s,c){return Object(n["v"])(),Object(n["f"])("div",{class:Object(n["o"])(["OneTask","OneTask__".concat(i.status)])},[Object(n["g"])("div",F,[t.task.finish.val&&!t.task.archive.val?(Object(n["v"])(),Object(n["f"])("p",y," Завершена ")):Object(n["e"])("",!0),t.task.archive.val?(Object(n["v"])(),Object(n["f"])("p",N," Архивная ")):Object(n["e"])("",!0),t.task.archive.val||t.task.finish.val?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("p",S," Активная ")),Object(n["g"])("div",null,[t.task.finish.val?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("span",{key:0,class:"OneTask-ActionButton icon icon-edit",onClick:a[0]||(a[0]=function(e){return i.editTask(t.task._id)})})),!t.task.archive.val&&t.task.finish.val?(Object(n["v"])(),Object(n["f"])("span",{key:1,class:"OneTask-ActionButton icon icon-inbox",onClick:a[1]||(a[1]=function(e){return i.archivedTask(t.task._id)})})):Object(n["e"])("",!0),t.task.finish.val?Object(n["e"])("",!0):(Object(n["v"])(),Object(n["f"])("span",{key:2,class:"OneTask-ActionButton icon icon-check",onClick:a[2]||(a[2]=function(e){return i.finishedTask(t.task._id)})}))])]),Object(n["g"])("p",A,[w,Object(n["g"])("span",D,Object(n["F"])(t.task.nameTask.val),1)]),Object(n["g"])("p",G,[E,Object(n["g"])("span",C,Object(n["F"])(t.task.description.val),1)]),Object(n["g"])("p",L,[J,Object(n["h"])(" "+Object(n["F"])(i.FormattingDate(t.task.dateCreate.val)),1)]),Object(n["g"])("p",_,[x,Object(n["h"])(" "+Object(n["F"])(i.FormattingDate(t.task.dateFinish.val)),1)])],2)}var U=t("844a"),M={name:"one-task",props:{task:{type:Object}},setup:function(e,a){var t=a.emit,i=Object(n["b"])((function(){return e.task.archive.val?"Archive":e.task.finish.val?"Finished":new Date(e.task.dateFinish.val)<new Date?"Time":"InTime"})),s=function(e){t("editTask",e)},c=function(e){t("archivedTask",e)},l=function(e){t("finishedTask",e)};return{FormattingDate:U["FormattingDate"],editTask:s,archivedTask:c,finishedTask:l,status:i}}},I=(t("1eec"),t("6b0d")),B=t.n(I);const H=B()(M,[["render",V]]);var q=H,z={key:0,class:"FormEdit"},K={class:"FormEdit-Content"},P=Object(n["g"])("h2",{class:"FormEdit-Header"},"Редактирование задачи",-1),Q={class:"FormEdit-Buttons"};function R(e,a,t,i,s,c){var l=Object(n["D"])("yuv-input"),o=Object(n["D"])("yuv-button");return i.show?(Object(n["v"])(),Object(n["f"])("div",z,[Object(n["g"])("div",K,[P,Object(n["i"])(l,{class:"FormEdit-Input",id:"nameTask",label:"Имя задачи",modelValue:i.dataForForm.nameTask.val,"onUpdate:modelValue":a[0]||(a[0]=function(e){return i.dataForForm.nameTask.val=e})},null,8,["modelValue"]),Object(n["i"])(l,{class:"FormEdit-Input",id:"dateFinish",type:"date",label:"Дата окончания",modelValue:i.dataForForm.dateFinish.val,"onUpdate:modelValue":a[1]||(a[1]=function(e){return i.dataForForm.dateFinish.val=e})},null,8,["modelValue"]),Object(n["i"])(l,{class:"FormEdit-Input",id:"description",label:"Описание",modelValue:i.dataForForm.description.val,"onUpdate:modelValue":a[2]||(a[2]=function(e){return i.dataForForm.description.val=e})},null,8,["modelValue"]),Object(n["g"])("div",Q,[Object(n["i"])(o,{name:"Сохранить",fun:i.save},null,8,["fun"]),Object(n["i"])(o,{name:"Отменить",fun:i.cansel},null,8,["fun"])])])])):Object(n["e"])("",!0)}t("e9c4");var W={name:"form-edit",props:["dataInForm"],setup:function(e,a){var t=a.emit,i=Object(n["A"])(!1),s=function(){i.value=!0},c=function(){i.value=!1},l=Object(n["A"])({nameTask:{val:""},dateFinish:{val:""},description:{val:""}});Object(n["J"])((function(){return e.dataInForm}),(function(e){e.dateFinish.val=Object(U["InputDate"])(e.dateFinish.val),l.value=e}));var o=function(){t("saveEditData",JSON.parse(JSON.stringify(l.value)))},r=function(){c()};return{dataForForm:l,show:i,onOpen:s,onClose:c,save:o,cansel:r}}};t("58a7");const X=B()(W,[["render",R]]);var Y=X,Z=(t("b0c0"),t("d3b7"),t("5502"));function $(e){var a=Object(Z["b"])(),t=Object(n["A"])(null),i=function(){t.value.onOpen()},s=function(t){var n={nameTask:{type:"text",val:t.name},dateCreate:{type:"date",val:new Date(t.dateCreate)},dateFinish:{type:"date",val:new Date(t.dateFinish)},finish:{type:"checkbox",val:!1},archive:{type:"checkbox",val:!1},description:{type:"textarea",val:t.description}},i={listName:a.getters.GetUserName,task:n};a.commit("SetGloaderFlag",!0),a.dispatch("apiAddTask",i).then((function(a){e.value.push(a)})).finally((function(){a.commit("SetGloaderFlag",!1)}))};return{createTaskForm:t,newTask:i,newTaskSave:s}}function ee(){var e=Object(Z["b"])(),a=Object(n["A"])("main"),t=Object(n["A"])([]),i=function(){a.value="main",e.commit("SetGloaderFlag",!0),e.dispatch("apiGetList",{listName:e.getters.GetUserName}).then((function(e){t.value=JSON.parse(JSON.stringify(e.payload))})).finally((function(){e.commit("SetGloaderFlag",!1)}))},s=function(){a.value="archive",e.commit("SetGloaderFlag",!0),e.dispatch("apiGetArchiveList",{listName:e.getters.GetUserName}).then((function(e){t.value=JSON.parse(JSON.stringify(e.payload))})).finally((function(){e.commit("SetGloaderFlag",!1)}))};return Object(n["t"])((function(){i()})),{taskFlag:a,taskLists:t,getMainTask:i,getArchivedTask:s}}function ae(e){var a=Object(Z["b"])(),t=Object(n["A"])(null),i=Object(n["A"])(""),s=function(a){console.log("edit",a);for(var n=0;n<e.value.length;n++)if(e.value[n]._id===a){i.value=JSON.parse(JSON.stringify(e.value[n]));break}t.value.onOpen()},c=function(n){n.dateCreate.val=new Date(n.dateCreate.val),n.dateFinish.val=new Date(n.dateFinish.val),a.commit("SetGloaderFlag",!0),a.dispatch("apiEditTask",{listName:a.getters.GetUserName,task:n}).then((function(i){a.commit("SetNotification",{header:"Успех",body:i.payload,flag:!0,status:"success",duration:5e3});for(var s=0;s<e.value.length;s++)e.value[s]._id===n._id&&(e.value[s]=n);t.value.onClose()})).catch((function(){a.commit("SetNotification",{header:"Ошибка",body:"Не удалось обновить задачу. Попробуйте позже",flag:!0,status:"error",duration:5e3})})).finally((function(){a.commit("SetGloaderFlag",!1)}))};return{editTaskForm:t,editData:i,editOneTask:s,saveAfterEdit:c}}t("a434");function te(e){var a=Object(Z["b"])(),t=function(t){console.log("archived",t);for(var n="",i=0;i<e.value.length;i++)if(e.value[i]._id===t){n=JSON.parse(JSON.stringify(e.value[i]));break}n.archive.val=!0,a.commit("SetGloaderFlag",!0),a.dispatch("apiEditTask",{listName:a.getters.GetUserName,task:n}).then((function(){a.commit("SetNotification",{header:"Успех",body:"Задача успешно отправлена в архив",flag:!0,status:"success",duration:5e3});for(var n=0;n<e.value.length;n++)if(e.value[n]._id===t){e.value[n].archive.val=!0,e.value.splice(n,1);break}})).catch((function(){a.commit("SetNotification",{header:"Ошибка",body:"Не удалось отправить задачу в архив. Попробуйте позже",flag:!0,status:"error",duration:5e3})})).finally((function(){a.commit("SetGloaderFlag",!1)}))},n=function(){a.commit("SetGloaderFlag",!0),a.dispatch("apiClearArchive",{listName:a.getters.GetUserName}).then((function(t){a.commit("SetNotification",{header:"Успех",body:t.message,flag:!0,status:"success",duration:5e3}),e.value=[]})).catch((function(){a.commit("SetNotification",{header:"Ошибка",body:"Не удалось очистить архивные задачи. Попробуйте позже",flag:!0,status:"error",duration:5e3})})).finally((function(){a.commit("SetGloaderFlag",!1)}))};return{archivedOneTask:t,clearArchive:n}}function ne(e){var a=Object(Z["b"])(),t=function(t){console.log("finished",t);for(var n="",i=0;i<e.value.length;i++)if(e.value[i]._id===t){n=JSON.parse(JSON.stringify(e.value[i]));break}n.finish.val=!0,a.commit("SetGloaderFlag",!0),a.dispatch("apiEditTask",{listName:a.getters.GetUserName,task:n}).then((function(){a.commit("SetNotification",{header:"Успех",body:"Задача завершена",flag:!0,status:"success",duration:5e3});for(var n=0;n<e.value.length;n++)if(e.value[n]._id===t){e.value[n].finish.val=!0;break}})).catch((function(){a.commit("SetNotification",{header:"Ошибка",body:"Не удалось завершить задачу. Попробуйте позже",flag:!0,status:"error",duration:5e3})})).finally((function(){a.commit("SetGloaderFlag",!1)}))};return{finishedOneTask:t}}var ie={name:"lk",components:{OneTask:q,FormEdit:Y},setup:function(){var e=ee(),a=e.taskFlag,t=e.taskLists,n=e.getArchivedTask,i=e.getMainTask,s=$(t),c=s.createTaskForm,l=s.newTask,o=s.newTaskSave,r=ae(t),d=r.editTaskForm,u=r.editData,v=r.editOneTask,k=r.saveAfterEdit,f=te(t),O=f.archivedOneTask,b=f.clearArchive,m=ne(t),h=m.finishedOneTask;return{getMainTask:i,createTaskForm:c,editTaskForm:d,taskFlag:a,taskLists:t,newTask:l,newTaskSave:o,editOneTask:v,saveAfterEdit:k,archivedOneTask:O,finishedOneTask:h,editData:u,getArchivedTask:n,clearArchive:b}}};t("d16a");const se=B()(ie,[["render",T]]);a["default"]=se},d16a:function(e,a,t){"use strict";t("2d77")}}]);
//# sourceMappingURL=taskList.js.map