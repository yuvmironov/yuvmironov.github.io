(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["notesList"],{"049e":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a={class:"NotesList"},l=Object(n["g"])("h1",null,"Заметки",-1),i={class:"NotesList-Buttons"},c={key:0,class:"NotesList-Notes"},r={key:1,class:"NotesList-Notes"};function u(e,t,o,u,s,d){var f=Object(n["D"])("yuv-button"),b=Object(n["D"])("one-note"),v=Object(n["D"])("note-form");return Object(n["v"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("div",a,[l,Object(n["g"])("div",i,[Object(n["i"])(f,{label:"Создать заметку","left-icon":"plus",type:"text",fun:u.CreateNote},null,8,["fun"])]),u.notes.length?(Object(n["v"])(),Object(n["f"])("div",c,[(Object(n["v"])(!0),Object(n["f"])(n["a"],null,Object(n["B"])(u.notes,(function(e){return Object(n["v"])(),Object(n["d"])(b,{key:e._id,note:e,onEditNote:u.EditNote,onDelNote:u.DelNote},null,8,["note","onEditNote","onDelNote"])})),128))])):(Object(n["v"])(),Object(n["f"])("div",r,' У вас нет заметок. Нажмите "Создать заметку" что бы добавить новую заметку '))]),Object(n["i"])(v,{ref:"NoteForm",data:u.dataForForm,onSaveData:u.SaveNote},null,8,["data","onSaveData"])],64)}o("b0c0");var s={class:"OneNote-HeaderBlock"},d={class:"OneNote-Header"},f={class:"OneNote-Actions"},b=["innerHTML"];function v(e,t,o,a,l,i){return Object(n["v"])(),Object(n["f"])("div",{class:"OneNote",style:Object(n["p"])({backgroundColor:o.note.color.val})},[Object(n["g"])("div",s,[Object(n["g"])("p",d,Object(n["F"])(o.note.name.val),1),Object(n["g"])("div",f,[Object(n["g"])("span",{class:"OneNote-Button icon icon-edit",onClick:t[0]||(t[0]=function(e){return a.edit(o.note._id)})}),Object(n["g"])("span",{class:"OneNote-Button icon icon-trash",onClick:t[1]||(t[1]=function(e){return a.del(o.note._id)})})])]),Object(n["g"])("div",{class:"OneNote-Body",innerHTML:o.note.body.val},null,8,b)],4)}var m={name:"one-note",props:["note"],setup:function(e,t){var o=t.emit,n=function(e){o("EditNote",e)},a=function(e){o("DelNote",e)};return{edit:n,del:a}}},O=(o("0753"),o("6b0d")),N=o.n(O);const p=N()(m,[["render",v]]);var j=p,g={key:0,class:"NoteForm"},y={class:"NoteForm-Content"},F={class:"NoteForm-Inputs"},h=Object(n["g"])("h2",{class:"NoteForm-Header"},"Работа с заметкой",-1),S={class:"NoteForm-Buttons"};function k(e,t,o,a,l,i){var c=Object(n["D"])("yuv-select"),r=Object(n["D"])("yuv-input"),u=Object(n["D"])("editor"),s=Object(n["D"])("yuv-button");return a.flagNoteFormOpen?(Object(n["v"])(),Object(n["f"])("div",g,[Object(n["g"])("div",y,[Object(n["g"])("div",{class:"NoteForm-ColorNote",style:Object(n["p"])("background-color: ".concat(a.dataInForm.color.val))}," Цвет заметки ",4),Object(n["g"])("div",F,[h,Object(n["i"])(c,{class:"NoteForm-Input",label:"Выберите цвет",id:"color",options:a.colors,modelValue:a.dataInForm.color.val,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.dataInForm.color.val=e})},null,8,["options","modelValue"]),Object(n["i"])(r,{class:"NoteForm-Input",id:"nameNote",label:"Заголовок",modelValue:a.dataInForm.name.val,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.dataInForm.name.val=e})},null,8,["modelValue"]),Object(n["i"])(u,{"api-key":"iruikfet3r7sfm7pqjfnkn2io5ntkh89phqfpbgzkib6rl0i","cloud-channel":"5","output-format":"html",init:a.tinyInitConfig,modelValue:a.dataInForm.body.val,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.dataInForm.body.val=e}),"initial-value":a.dataInForm.body.val},null,8,["init","modelValue","initial-value"]),Object(n["g"])("div",S,[Object(n["i"])(s,{label:"Сохранить",fun:a.save},null,8,["fun"]),Object(n["i"])(s,{label:"Отмена",fun:a.cancel},null,8,["fun"])])])])])):Object(n["e"])("",!0)}var D=o("5502"),I="",G={name:"note-form",props:["data"],setup:function(e,t){var o=t.emit,a=Object(D["b"])(),l=[{id:"#ff8080",name:"Красный"},{id:"#f2c94c",name:"Оранжевый"},{id:"#27ae60",name:"Зеленый"}],i=Object(n["A"])({width:"100%",height:"400px",resize:!1,menubar:!1,toolbar:"\n        bold italic",id:"oneNoteEditor","model-events":"change keydown blur focus paste"}),c=Object(n["A"])(!1),r=function(e){I=e,c.value=!0},u=function(){c.value=!1,I=""},s=Object(n["A"])(""),d=function(){s.value.body.val||s.value.name.val?(o("SaveData",{data:s,flagActions:I}),u()):a.commit("SetNotification",{header:"Ошибка",body:"Заполнены не все поля",flag:!0,status:"error",duration:5e3})},f=function(){s.value="",u()};return Object(n["J"])((function(){return e.data}),(function(e){s.value=e})),{colors:l,flagNoteFormOpen:c,onOpen:r,onClose:u,dataInForm:s,tinyInitConfig:i,save:d,cancel:f}}};o("b49f");const C=N()(G,[["render",k]]);var w=C;o("d3b7");function A(){var e=Object(D["b"])(),t=Object(n["A"])("");return Object(n["t"])((function(){e.commit("SetGloaderFlag",!0),e.dispatch("apiGetNotes",{listName:e.getters.GetUserName}).then((function(e){t.value=e.payload})).finally((function(){e.commit("SetGloaderFlag",!1)}))})),{notes:t}}o("e9c4");function E(e,t){var o=Object(D["b"])(),a=Object(n["A"])(""),l=function(){console.log("Создать заметку"),a.value={color:{type:"String",val:""},name:{type:"String",val:""},body:{type:"String",val:""}},t.value.onOpen("create")},i=function(t){o.commit("SetGloaderFlag",!0),o.dispatch("apiEditNote",{listName:o.getters.GetUserName,note:t.value}).then((function(n){o.commit("SetNotification",{header:"Успех",body:n.payload,flag:!0,status:"success",duration:5e3});for(var a=0;a<e.value.length;a++)if(e.value[a]._id===t.value._id){e.value[a]=t.value;break}})).finally((function(){o.commit("SetGloaderFlag",!1)}))},c=function(t){o.commit("SetGloaderFlag",!0),o.dispatch("apiNewNote",{listName:o.getters.GetUserName,note:t.value}).then((function(t){e.value.push(t.payload[0])})).finally((function(){o.commit("SetGloaderFlag",!1)}))},r=function(e){"edit"===e.flagActions?i(e.data):"create"===e.flagActions&&c(e.data)},u=function(o){for(var n=0;n<e.value.length;n++)if(e.value[n]._id===o){a.value=JSON.parse(JSON.stringify(e.value[n]));break}t.value.onOpen("edit")};return{dataForForm:a,CreateNote:l,SaveNote:r,EditNote:u}}o("a434");function V(e){var t=Object(D["b"])(),o=function(o){t.commit("SetGloaderFlag",!0),t.dispatch("apiDeleteNote",{listName:t.getters.GetUserName,noteId:o}).then((function(n){console.log(n),t.commit("SetNotification",{header:"Успех",body:n.payload,flag:!0,status:"success",duration:5e3});for(var a=0;a<e.value.length;a++)if(e.value[a]._id===o){e.value.splice(a,1);break}})).finally((function(){t.commit("SetGloaderFlag",!1)}))};return{DelNote:o}}var B={name:"notes-list",components:{OneNote:j,NoteForm:w},setup:function(){var e=Object(n["A"])(null),t=A(),o=t.notes,a=E(o,e),l=a.SaveNote,i=a.EditNote,c=a.dataForForm,r=a.CreateNote,u=V(o),s=u.DelNote;return{CreateNote:r,notes:o,NoteForm:e,dataForForm:c,SaveNote:l,EditNote:i,DelNote:s}}};o("3a44");const L=N()(B,[["render",u]]);t["default"]=L},"0753":function(e,t,o){"use strict";o("fabf")},"2a08":function(e,t,o){},"3a44":function(e,t,o){"use strict";o("2a08")},a434:function(e,t,o){"use strict";var n=o("23e7"),a=o("da84"),l=o("23cb"),i=o("5926"),c=o("07fa"),r=o("7b0b"),u=o("65f0"),s=o("8418"),d=o("1dde"),f=d("splice"),b=a.TypeError,v=Math.max,m=Math.min,O=9007199254740991,N="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var o,n,a,d,f,p,j=r(this),g=c(j),y=l(e,g),F=arguments.length;if(0===F?o=n=0:1===F?(o=0,n=g-y):(o=F-2,n=m(v(i(t),0),g-y)),g+o-n>O)throw b(N);for(a=u(j,n),d=0;d<n;d++)f=y+d,f in j&&s(a,d,j[f]);if(a.length=n,o<n){for(d=y;d<g-n;d++)f=d+n,p=d+o,f in j?j[p]=j[f]:delete j[p];for(d=g;d>g-n+o;d--)delete j[d-1]}else if(o>n)for(d=g-n;d>y;d--)f=d+n-1,p=d+o-1,f in j?j[p]=j[f]:delete j[p];for(d=0;d<o;d++)j[d+y]=arguments[d+2];return j.length=g-n+o,a}})},b49f:function(e,t,o){"use strict";o("e03e")},e03e:function(e,t,o){},fabf:function(e,t,o){}}]);
//# sourceMappingURL=notesList.js.map